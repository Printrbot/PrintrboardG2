[stepper_x]
step_pin = PC0
dir_pin = !PL0
enable_pin = !PA7
step_distance = 0.0124601
endstop_pin = tmc2130_stepper_x:virtual_endstop
position_endstop = 0
position_max = 171
homing_speed = 50.0
homing_retract_dist = 0
homing_positive_dir = false

[tmc2130 stepper_x]
cs_pin = PG0
microsteps = 16
run_current = .9
sense_resistor = 0.22
diag1_pin = !PK2
driver_sgt = 3
interpolate = true
driver_iholddelay = 8
driver_tpowerdown = 30
driver_tbl = 2
driver_toff = 3
driver_hend = 1
driver_hstrt = 5
driver_pwm_autoscale = True
driver_pwm_freq = 2
driver_pwm_grad = 2
driver_pwm_ampl = 230

[stepper_y]
step_pin = PC1
dir_pin = !PL1
enable_pin = !PA6
step_distance = 0.0125
endstop_pin = tmc2130_stepper_y:virtual_endstop
position_endstop = 200
position_max = 200
position_min = 0
homing_speed = 50.0
homing_retract_dist = 0
homing_positive_dir = true

[tmc2130 stepper_y]
cs_pin = PG2
microsteps = 16
run_current = .9
hold_current = .5
sense_resistor = 0.22
diag1_pin = !PK7
driver_sgt = 4
driver_iholddelay = 8
driver_tpowerdown = 30
driver_tbl = 2
driver_toff = 3
driver_hend = 1
driver_hstrt = 5
driver_pwm_autoscale = True
driver_pwm_freq = 2
driver_pwm_grad = 2
driver_pwm_ampl = 235

[stepper_z]
step_pin = PC2
dir_pin = !PL2
enable_pin = !PA5
step_distance = .0025
endstop_pin = probe:z_virtual_endstop
position_min = -3
position_max = 190
homing_positive_dir = false
homing_speed = 15

[homing_override]
set_position_z = 0
axes = z
gcode = 
	G90 ; Uncomment these 2 lines to blindly lift the Z 4mm at start
	G1 Z5 F600
	G28 X0 Y0
	G1 X80 Y100 F3600
	G28 Z0

[bed_mesh]
speed = 350
min_point: 0,15
max_point: 130,200
probe_count = 6,8
bicubic_tension = .2
mesh_pps = 2,2
algorithm = bicubic
fade_start: 2
#   The gcode z position in which to start phasing out z-adjustment
#   when fade is enabled.  Default is 1.0.
fade_end: 20
#   The gcode z position in which phasing out completes.  When set
#   to a value below fade_start, fade is disabled. It should be
#   noted that fade may add unwanted scaling along the z-axis of a
#   print.  If a user wishes to enable fade, a value of 10.0 is
#   recommended. Default is 0.0, which disables fade.
#fade_target:
#   The z position in which fade should converge. When this value is set
#   to a non-zero value it must be within the range of z-values in the mesh.
#   Users that wish to converge to the z homing position should set this to 0.
#   Default is the average z value of the mesh.

[probe]
x_offset = 20
pin = ^PB4
speed = 15
z_offset = .75
samples: 1
sample_retract_dist: 2.0
samples_result: average

[gcode_macro G29]
gcode = 
	BED_MESH_CALIBRATE

[gcode_macro M500]
gcode = 
	SAVE_CONFIG

[gcode_macro M501]
gcode = 
	STATUS

[gcode_macro M503]
gcode = 
	HELP

[tmc2130 stepper_z]
cs_pin = PK5
microsteps = 16
run_current = .9
sense_resistor = 0.22
diag1_pin = !PK6
interpolate = true
driver_iholddelay = 8
driver_tpowerdown = 30
driver_tbl = 2
driver_toff = 3
driver_hend = 3
driver_hstrt = 6
driver_pwm_autoscale = True
driver_pwm_freq = 2
driver_pwm_grad = 4
driver_pwm_ampl = 200

[extruder]
step_pin = !PC3
dir_pin = !PL6
enable_pin = !PA4
step_distance = 0.007874015748
nozzle_diameter = 0.4
filament_diameter = 1.750
max_extrude_cross_section = 150
pressure_advance = 0.065
pressure_advance_lookahead_time = 0.015
max_extrude_only_distance = 250
max_extrude_only_velocity = 45
max_extrude_only_accel = 9000
heater_pin = PE5
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PF0
max_power = 1
control = pid
pid_kp = 18.547
pid_ki = 1.359
pid_kd = 120
min_extrude_temp = 175
min_temp = 0
max_temp = 275

[firmware_retraction]
retract_length: 1.5
#   The length of filament (in mm) to retract when G10 is activated, and to
#   unretract when G11 is activated (but see unretract_extra_length below).
#   The default is 0 mm.
retract_speed: 40
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0
#   The length (in mm) of *additional* filament to add when unretracting.
unretract_speed: 30
#   The speed of unretraction, in mm/s. The default is 10 mm/s.
#z_hop: 0
#   The amount of lift applied to the Z axis (in mm) on retract and
#   restored on unretract. The default is 0 mm.

[verify_heater extruder]
heating_gain = 2
check_gain_time = 25
hysteresis = 3
max_error = 140

[idle_timeout]
gcode = M84
timeout = 600

[tmc2130 extruder]
cs_pin = PK4
microsteps = 16
run_current = .9
sense_resistor = 0.22
diag1_pin = !PK3
interpolate = true
driver_iholddelay = 8
driver_tpowerdown = 30
driver_tbl = 2
driver_toff = 3
driver_hend = 2
driver_hstrt = 5
driver_pwm_autoscale = True
driver_pwm_freq = 2
driver_pwm_grad = 4
driver_pwm_ampl = 240

[heater_bed]
heater_pin = PG5
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PF2
max_power = 1.0
smooth_time = 2.0
control = watermark
min_temp = 0
max_temp = 110

[heater_fan my_nozzle_fan]
pin = PH3
heater = extruder
heater_temp = 45
fan_speed = 1

[fan]
pin = PH6

[mcu]
serial = /dev/serial/by-id/usb-UltiMachine__ultimachine.com__RAMBo_75535313630351C04232-if00

[printer]
kinematics = cartesian
max_velocity = 350
max_accel = 2000
max_accel_to_decel = 1500
max_z_velocity = 15
max_z_accel = 200
square_corner_velocity = 25

[endstop_phase stepper_z]
#endstop_phase = 12

[pause_resume]
recover_velocity = 15

[respond]
default_type = echo

[static_digital_output yellow_led]
pins = !PB7

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [endstop_phase stepper_z]
#*# endstop_phase = 36
